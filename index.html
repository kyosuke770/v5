<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Instant English</title>
  <link rel="stylesheet" href="./style.css?v=1" />
</head>
<body>

  <!-- LOADING OVERLAY -->
  <div id="loadingOverlay" class="loadingOverlay">
    <div class="loadingContent">
      <div class="loadingTitle">Instant English</div>
      <div class="loadingMessage" id="loadingMessage">Loading English cards<span class="dots"></span></div>
    </div>
  </div>

  <!-- LANDING (初回訪問時) -->
  <div id="landingView" class="hidden">
    <div class="landingHero">
      <div class="landingLogo">Instant English</div>
      <h1 class="landingCatchCopy">
        英語が話せない理由は<br>
        <span class="highlight">「練習不足」</span>だけ
      </h1>
      <p class="landingSubCopy">
        iPhoneだけで、移動中に、科学的に。<br>
        瞬間英作文を続ける仕組みがここに。
      </p>
    </div>

    <div class="landingBenefits">
      <div class="benefitCard">
        <div class="benefitIcon">📱</div>
        <div class="benefitTitle">iPhone完結</div>
        <div class="benefitDesc">アプリ不要。ブラウザで今すぐ始められる</div>
      </div>
      <div class="benefitCard">
        <div class="benefitIcon">🚃</div>
        <div class="benefitTitle">移動中に学習</div>
        <div class="benefitDesc">通勤・通学のスキマ時間を活用</div>
      </div>
      <div class="benefitCard">
        <div class="benefitIcon">🧠</div>
        <div class="benefitTitle">科学的な反復</div>
        <div class="benefitDesc">3段階SRSで効率的に記憶に定着</div>
      </div>
    </div>

    <div class="landingDemo">
      <div class="demoLabel">体験してみる（サンプル15問）</div>
      <div class="demoPreview">
        <div class="demoCard">
          <div class="demoJp">おはようございます。</div>
          <div class="demoArrow">↓</div>
          <div class="demoEn">Good morning.</div>
        </div>
      </div>
    </div>

    <div class="landingCTA">
      <button id="startNowBtn" class="ctaButton">今すぐ始める</button>
      <div class="ctaNote">※ データはブラウザに保存されます</div>
    </div>
  </div>

  <!-- HOME -->
  <div id="homeView">
    <header class="topbar">
      <div>
        <div class="title">Instant English</div>
        <div class="sub">iPhoneだけで回す瞬間英作文</div>
      </div>
      <div class="lastUpdated">2025-12-31 15:20</div>
    </header>

    <!-- 今日やること -->
    <section class="dailyMissions">
      <div class="missionsHeader">
        <h2 class="missionsTitle">📅 今日やること</h2>
      </div>

      <div class="missionCard" id="missionDue">
        <div class="missionIcon">✅</div>
        <div class="missionContent">
          <div class="missionTitle">復習（Due）</div>
          <div class="missionCount" id="missionDueCount">0件</div>
        </div>
        <button class="missionBtn" id="missionDueBtn">始める</button>
      </div>

      <div class="missionCard" id="missionWeak">
        <div class="missionIcon">🔥</div>
        <div class="missionContent">
          <div class="missionTitle">苦手克服</div>
          <div class="missionCount" id="missionWeakCount">0/30</div>
        </div>
        <button class="missionBtn" id="missionWeakBtn">始める</button>
      </div>

      <div class="missionCard" id="missionNewBlock">
        <div class="missionIcon">🆕</div>
        <div class="missionContent">
          <div class="missionTitle">新しいブロック</div>
          <div class="missionCount" id="missionNewBlockCount">ブロック1 (0/30)</div>
        </div>
        <button class="missionBtn" id="missionNewBlockBtn">始める</button>
      </div>
    </section>

    <section class="homeActionsGrid">
      <button id="homeVideo" class="actionCard">
        <div class="actionIcon">▶️</div>
        <div class="actionTitle">動画順</div>
        <div class="actionSub">全カード</div>
      </button>
      <button id="homeVariation" class="actionCard highlight">
        <div class="actionIcon">🔄</div>
        <div class="actionTitle">バリエーション</div>
        <div class="actionSub">全パターン練習</div>
      </button>
      <button id="homeStats" class="actionCard">
        <div class="actionIcon">📊</div>
        <div class="actionTitle">統計</div>
        <div class="actionSub">進捗確認</div>
      </button>
    </section>

    <section class="cardBox">
      <div class="hLabel">シーンで絞り込み</div>
      <div id="scenes" class="chips"></div>
    </section>

    <section class="cardBox">
      <div class="hLabel">ブロック一覧（動画ごと）</div>
      <div id="blockTable"></div>
    </section>

    <footer class="footer">
      <div class="hint">※ CSVを /data に追加するだけで増えます</div>
    </footer>
  </div>

  <!-- STATS -->
  <div id="statsView" class="hidden">
    <header class="topbar">
      <button id="backFromStats" class="iconBtn">←</button>
      <div class="title">学習統計</div>
      <div style="width: 40px;"></div>
    </header>

    <section class="cardBox">
      <div class="hLabel">全体サマリー</div>
      <div class="statsGrid">
        <div class="statItem">
          <div class="statValue" id="totalCards">0</div>
          <div class="statLabel">総カード数</div>
        </div>
        <div class="statItem">
          <div class="statValue" id="studiedCards">0</div>
          <div class="statLabel">学習済み</div>
        </div>
        <div class="statItem">
          <div class="statValue" id="dueCards">0</div>
          <div class="statLabel">復習待ち</div>
        </div>
        <div class="statItem">
          <div class="statValue" id="masteredCards">0</div>
          <div class="statLabel">習得済み</div>
        </div>
      </div>
    </section>

    <section class="cardBox">
      <div class="hLabel">レベル別進捗</div>
      <div id="levelStats"></div>
    </section>

    <section class="cardBox">
      <div class="hLabel">評価の分布（全レベル）</div>
      <div id="gradeDistribution"></div>
    </section>

    <section class="cardBox">
      <div class="hLabel">シーン別カード数</div>
      <div id="sceneStats"></div>
    </section>

    <section class="cardBox">
      <div class="hLabel">最近7日間の学習</div>
      <div id="recentActivity"></div>
    </section>
  </div>

  <!-- STUDY -->
  <div id="studyView" class="hidden">
    <header class="studyTop">
      <button id="backHome" class="iconBtn">←</button>
      <div class="studyTitle">Study</div>
      <div class="studyBtns">
        <button id="review" class="ghostBtn small">Due</button>
        <button id="videoOrder" class="ghostBtn small">動画順</button>
      </div>
    </header>

    <section class="levelRow">
      <button id="lv1Btn" class="lvBtnTop">Lv1</button>
      <button id="lv2Btn" class="lvBtnTop">Lv2</button>
      <button id="lv3Btn" class="lvBtnTop">Lv3</button>
    </section>

    <!-- ✅ Study中もブロック進捗を表示 -->
    <section class="cardBox studyProgressBox">
      <div class="rowBetween">
        <div class="hLabel">ブロック進捗</div>
        <div class="studyProgressRight">
          <span id="studyModeTag" class="modeTag">通常</span>
          <span id="studyProgressText" class="hValue">進捗：Lv1 0 / 0</span>
        </div>
      </div>
      <div class="barWrap">
        <div id="studyProgressBar" class="bar"></div>
      </div>
    </section>

    <main class="studyMain">
      <div id="card" class="card">
        <div class="jp" id="jp">CSV読み込み中…</div>
        <div class="en" id="en"></div>
      </div>

      <div class="noteArea">
        <div id="noteText" class="noteText"></div>
        <div id="statsText" class="stats"></div>
      </div>

      <!-- ヒントボタン -->
      <div id="hintButtons" class="hintButtons hidden">
        <button id="hint1Btn" class="hintBtn">ヒント1</button>
        <button id="hint2Btn" class="hintBtn">ヒント2</button>
      </div>
      <div id="hintArea" class="hintArea"></div>

      <div class="navRow">
        <button id="next" class="ghostBtn wide">次へ</button>
      </div>

      <!-- ✅ 3段階SRS -->
      <div class="gradeRow gradeRow3">
        <button id="g1" class="grade g1">Again<br><span>5m</span></button>
        <button id="g2" class="grade g2">Hard<br><span>6h</span></button>
        <button id="g3" class="grade g3">Easy<br><span>12d</span></button>
      </div>

      <!-- 解説・類似表現エリア（回答後表示） -->
      <div id="explainArea" class="explainArea hidden">
        <div id="explainMeaning" class="explainSection"></div>
        <div id="explainNuance" class="explainSection"></div>
        <div id="explainGrammar" class="explainSection"></div>
        <div id="similarsArea" class="explainSection"></div>
      </div>
    </main>
  </div>

  <script src="./app.js?v=1"></script>
</body>
</html>
